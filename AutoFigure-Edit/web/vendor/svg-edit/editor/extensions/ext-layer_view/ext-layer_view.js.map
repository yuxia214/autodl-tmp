{"version":3,"mappings":";;;;;;;;;;;;;;;AAQA,MAAM,OAAO;AAEb,MAAM,2BAA2B,eAAgB,WAAW;AAC1D,MAAI;AACJ,QAAM,OAAO,UAAU,UAAU,KAAK,MAAM;AAC5C,MAAI;AACF,wBAAoB,MAAM,kCAAO,YAAY,IAAI,KAAK;AAAA,EACxD,SAAS,QAAQ;AACf,YAAQ,KAAK,wBAAwB,IAAI,SAAS,IAAI,eAAe;AACrE,wBAAoB,MAAK,oBAAC,OAAO,gBAAgB;AAAA,EACnD;AACA,YAAU,QAAQ,kBAAkB,MAAM,MAAM,kBAAkB,OAAO;AAC3E;AAEA,sBAAe;AAAA,EACb;AAAA,EACA,MAAM,KAAM,IAAI;AACd,UAAM,YAAY;AAClB,UAAM,EAAE,UAAS,IAAK;AACtB,UAAM,EAAE,KAAK,WAAW;AACxB,UAAM,yBAAyB,SAAS;AAExC,UAAM,iBAAiB,CAAC,MAAM;AAC5B,UAAI,gBAAgB,EAAE,UAAU,CAAC,IAAI,gBAAgB,EAAE;AACvD,sBAAgB,CAAC;AAAA,IACnB;AAEA,UAAM,kBAAkB,CAAC,MAAM;AAC7B,YAAM,UAAU,UAAU,kBAAiB;AAC3C,YAAM,WAAW,QAAQ,oBAAmB;AAC5C,UAAI,QAAQ,QAAQ,aAAY;AAChC,aAAO,SAAS;AACd,cAAMA,QAAO,QAAQ,aAAa,KAAK;AACvC,YAAIA,UAAS,YAAY,IAAI,gBAAgB,EAAE,SAAS;AACtD,kBAAQ,mBAAmBA,OAAM,KAAK;AAAA,QACxC,OAAO;AACL,kBAAQ,mBAAmBA,OAAM,IAAI;AAAA,QACvC;AAAA,MACF;AACA,UAAI,WAAW,EAAE,iBAAiB,UAAU,EAAE;AAAA,QAC5C,SAAU,IAAI;AACZ,gBAAM,WAAW,GAAG,cAAc,aAAa;AAC/C,gBAAM,MAAM,GAAG,UAAU,SAAS,UAAU,KAAK,CAAC,IAAI,gBAAgB,EAAE,UAAU,aAAa;AAC/F,mBAAS,aAAa,SAAS,GAAG;AAAA,QACpC;AAAA,MACR;AAAA,IACI;AAEA,WAAO;AAAA,MACL,MAAM,UAAU,QAAQ,EAAE,GAAG,IAAI,OAAO;AAAA;AAAA,MAExC,gBAAiB;AACf,YAAI,IAAI,gBAAgB,EAAE,SAAS;AACjC,0BAAe;AAAA,QACjB;AAAE,YAAI,UAAU,UAAU,UAAU,WAAW;AAC7C,oBAAU,UAAU,UAAU,YAAY;AAC1C,cAAI,gBAAgB,EAAE,UAAU;AAChC,0BAAe;AAAA,QACjB;AAAA,MACF;AAAA,MACA,kBAAmB;AACjB,YAAI,IAAI,gBAAgB,EAAE,SAAS;AACjC,cAAI,gBAAgB,EAAE,UAAU,CAAC,IAAI,gBAAgB,EAAE;AAAA,QACzD;AAAA,MACF;AAAA,MACA,WAAY;AACV,cAAM,iBAAiB,SAAS,cAAc,UAAU;AACxD,cAAM,QAAQ,GAAG,IAAI;AACrB,cAAM,MAAM,GAAG,IAAI;AACnB,uBAAe,YAAY;AAAA,8CACW,KAAK,eAAe,GAAG;AAC7D,YAAI,cAAc,EAAE,OAAO,eAAe,QAAQ,UAAU,IAAI,CAAC;AACjE,eAAO,IAAI,gBAAgB,GAAG,eAAe,KAAK,IAAI,CAAC;AAAA,MACzD;AAAA,IACN;AAAA,EACE;AACF","names":["name"],"ignoreList":[],"sources":["../../../../src/editor/extensions/ext-layer_view/ext-layer_view.js"],"sourcesContent":["/**\n * @file ext-layer_view.js\n *\n * @license MIT\n *\n *\n */\n\nconst name = 'layer_view'\n\nconst loadExtensionTranslation = async function (svgEditor) {\n  let translationModule\n  const lang = svgEditor.configObj.pref('lang')\n  try {\n    translationModule = await import(`./locale/${lang}.js`)\n  } catch (_error) {\n    console.warn(`Missing translation (${lang}) for ${name} - using 'en'`)\n    translationModule = await import('./locale/en.js')\n  }\n  svgEditor.i18next.addResourceBundle(lang, name, translationModule.default)\n}\n\nexport default {\n  name,\n  async init (_S) {\n    const svgEditor = this\n    const { svgCanvas } = svgEditor\n    const { $id, $click } = svgCanvas\n    await loadExtensionTranslation(svgEditor)\n\n    const clickLayerView = (e) => {\n      $id('tool_layerView').pressed = !$id('tool_layerView').pressed\n      updateLayerView(e)\n    }\n\n    const updateLayerView = (e) => {\n      const drawing = svgCanvas.getCurrentDrawing()\n      const curLayer = drawing.getCurrentLayerName()\n      let layer = drawing.getNumLayers()\n      while (layer--) {\n        const name = drawing.getLayerName(layer)\n        if (name !== curLayer && $id('tool_layerView').pressed) {\n          drawing.setLayerVisibility(name, false)\n        } else {\n          drawing.setLayerVisibility(name, true)\n        }\n      }\n      $id('layerlist').querySelectorAll('tr.layer').forEach(\n        function (el) {\n          const layervis = el.querySelector('td.layervis')\n          const vis = el.classList.contains('layersel') || !$id('tool_layerView').pressed ? 'layervis' : 'layerinvis layervis'\n          layervis.setAttribute('class', vis)\n        }\n      )\n    }\n\n    return {\n      name: svgEditor.i18next.t(`${name}:name`),\n      // The callback should be used to load the DOM with the appropriate UI items\n      layersChanged () {\n        if ($id('tool_layerView').pressed) {\n          updateLayerView()\n        } if (svgEditor.configObj.curConfig.layerView) {\n          svgEditor.configObj.curConfig.layerView = false\n          $id('tool_layerView').pressed = true\n          updateLayerView()\n        }\n      },\n      layerVisChanged () {\n        if ($id('tool_layerView').pressed) {\n          $id('tool_layerView').pressed = !$id('tool_layerView').pressed\n        }\n      },\n      callback () {\n        const buttonTemplate = document.createElement('template')\n        const title = `${name}:buttons.0.title`\n        const key = `${name}:buttons.0.key`\n        buttonTemplate.innerHTML = `\n      <se-button id=\"tool_layerView\" title=\"${title}\" shortcut=\"${key}\" src=\"layer_view.svg\"></se-button>`\n        $id('editor_panel').append(buttonTemplate.content.cloneNode(true))\n        $click($id('tool_layerView'), clickLayerView.bind(this))\n      }\n    }\n  }\n}\n"],"file":"ext-layer_view.js"}