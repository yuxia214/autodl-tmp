{"version":3,"file":"storageDialog.js","sources":["../../../../src/editor/extensions/ext-storage/storageDialog.js"],"sourcesContent":["/* globals svgEditor */\nimport storageDialogHTML from './storageDialog.html'\n\nconst template = document.createElement('template')\ntemplate.innerHTML = storageDialogHTML\n/**\n * @class SeStorageDialog\n */\nexport class SeStorageDialog extends HTMLElement {\n  /**\n    * @function constructor\n    */\n  constructor () {\n    super()\n    // create the shadowDom and insert the template\n    this._shadowRoot = this.attachShadow({ mode: 'open' })\n    this._shadowRoot.append(template.content.cloneNode(true))\n    this.$dialog = this._shadowRoot.querySelector('#dialog_box')\n    this.$storage = this._shadowRoot.querySelector('#js-storage')\n    this.$okBtn = this._shadowRoot.querySelector('#storage_ok')\n    this.$cancelBtn = this._shadowRoot.querySelector('#storage_cancel')\n    this.$storageInput = this._shadowRoot.querySelector('#se-storage-pref')\n    this.$rememberInput = this._shadowRoot.querySelector('#se-remember')\n  }\n\n  /**\n   * @function init\n   * @param {any} name\n   * @returns {void}\n   */\n  init (i18next) {\n    this.setAttribute('common-ok', i18next.t('common.ok'))\n    this.setAttribute('common-cancel', i18next.t('common.cancel'))\n    this.setAttribute('notify-editor_pref_msg', i18next.t('notification.editorPreferencesMsg'))\n    this.setAttribute('properties-prefs_and_content', i18next.t('properties.prefs_and_content'))\n    this.setAttribute('properties-prefs_only', i18next.t('properties.prefs_only'))\n    this.setAttribute('properties-no_prefs_or_content', i18next.t('properties.no_prefs_or_content'))\n    this.setAttribute('tools-remember_this_choice', i18next.t('tools.remember_this_choice'))\n    this.setAttribute('tools-remember_this_choice_title', i18next.t('tools.remember_this_choice_title'))\n  }\n\n  /**\n   * @function observedAttributes\n   * @returns {any} observed\n   */\n  static get observedAttributes () {\n    return ['dialog', 'storage', 'common-ok', 'common-cancel', 'notify-editor_pref_msg', 'properties-prefs_and_content', 'tools-remember_this_choice', 'tools-remember_this_choice_title', 'properties-prefs_only', 'properties-no_prefs_or_content']\n  }\n\n  /**\n   * @function attributeChangedCallback\n   * @param {string} name\n   * @param {string} oldValue\n   * @param {string} newValue\n   * @returns {void}\n   */\n  attributeChangedCallback (name, oldValue, newValue) {\n    let node\n    switch (name) {\n      case 'dialog':\n        if (newValue === 'open') {\n          this.$dialog.open()\n        } else {\n          this.$dialog.close()\n        }\n        break\n      case 'storage':\n        if (newValue === 'true') {\n          this.$storageInput.options[0].disabled = false\n        } else {\n          this.$storageInput.options[0].disabled = true\n        }\n        break\n      case 'common-ok':\n        this.$okBtn.textContent = newValue\n        break\n      case 'common-cancel':\n        this.$cancelBtn.textContent = newValue\n        break\n      case 'notify-editor_pref_msg':\n        node = this._shadowRoot.querySelector('#notificationNote')\n        node.textContent = newValue\n        break\n      case 'properties-prefs_and_content':\n        node = this._shadowRoot.querySelector('#prefsAndContent')\n        node.textContent = newValue\n        break\n      case 'properties-prefs_only':\n        node = this._shadowRoot.querySelector('#prefsOnly')\n        node.textContent = newValue\n        break\n      case 'properties-no_prefs_or_content':\n        node = this._shadowRoot.querySelector('#noPrefsOrContent')\n        node.textContent = newValue\n        break\n      case 'tools-remember_this_choice':\n        node = this._shadowRoot.querySelector('#se-remember-title')\n        node.prepend(newValue)\n        break\n      case 'tools-remember_this_choice_title':\n        node = this._shadowRoot.querySelector('#se-remember-title')\n        node.setAttribute('title', newValue)\n        break\n      default:\n        // super.attributeChangedCallback(name, oldValue, newValue);\n        break\n    }\n  }\n\n  /**\n   * @function get\n   * @returns {any}\n   */\n  get dialog () {\n    return this.getAttribute('dialog')\n  }\n\n  /**\n   * @function set\n   * @returns {void}\n   */\n  set dialog (value) {\n    this.setAttribute('dialog', value)\n  }\n\n  /**\n   * @function connectedCallback\n   * @returns {void}\n   */\n  connectedCallback () {\n    const onSubmitHandler = (e, action) => {\n      const triggerEvent = new CustomEvent('change',\n        {\n          detail: {\n            trigger: action,\n            select: this.$storageInput.value,\n            checkbox: this.$rememberInput.checked\n          }\n        })\n      this.dispatchEvent(triggerEvent)\n    }\n    svgEditor.$click(this.$okBtn, (evt) => onSubmitHandler(evt, 'ok'))\n    svgEditor.$click(this.$cancelBtn, (evt) => onSubmitHandler(evt, 'cancel'))\n  }\n}\n\n// Register\ncustomElements.define('se-storage-dialog', SeStorageDialog)\n"],"names":[],"mappings":"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"}